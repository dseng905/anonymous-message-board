(this["webpackJsonpfrontend-amb"]=this["webpackJsonpfrontend-amb"]||[]).push([[0],{20:function(e,t,a){e.exports=a(33)},25:function(e,t,a){},27:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),o=(a(25),a(1)),l=a.n(o),u=a(4),i=a(2),p=(a(27),function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(!1),p=Object(i.a)(o,2),d=p[0],m=p[1];function h(){return(h=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.target.reset(),"",n="/api/replies/"+e.board+"?_method=DELETE",t.next=6,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:e.thread_id,reply_id:e.reply_id,delete_password:c})});case 6:return r=t.sent,t.next=9,r.text();case 9:"success"===t.sent&&e.replyCountAdjust("DELETE");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=Object(u.a)(l.a.mark((function t(a){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"",n="/api/replies/"+e.board+"?_method=PUT",t.next=4,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:e.thread_id,reply_id:e.reply_id})});case 4:t.sent,m(!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement("div",{className:"reply-container"},r.a.createElement("p",{className:"reply-created-on"},new Date(e.createdOn).toUTCString()),r.a.createElement("p",null,e.text),r.a.createElement("form",{className:"reply-delete-form",onSubmit:function(e){return h.apply(this,arguments)}},r.a.createElement("input",{onChange:function(e){s(e.target.value)},placeholder:"Enter password to delete...",type:"password"}),r.a.createElement("button",{type:"submit"},"Delete")),r.a.createElement("button",{onClick:function(e){return b.apply(this,arguments)}},"Report"),d?r.a.createElement("p",null,"Reply has been reported!"):r.a.createElement("div",null))}),d=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),d=Object(i.a)(o,2),m=d[0],h=d[1],b=Object(n.useState)(""),f=Object(i.a)(b,2),E=f[0],y=f[1],O=Object(n.useState)([]),j=Object(i.a)(O,2),v=j[0],x=j[1],w=Object(n.useState)(0),g=Object(i.a)(w,2),S=g[0],_=g[1],N=Object(n.useState)(0),T=Object(i.a)(N,2),C=T[0],k=T[1],D=Object(n.useState)(!1),R=Object(i.a)(D,2),A=R[0],J=R[1];function P(){return(P=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.target.reset(),"",n="/api/replies/"+e.board,t.next=6,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:m,delete_password:E,thread_id:e._id})});case 6:return r=t.sent,t.next=9,r.text();case 9:"success"===t.sent&&_(S+1);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(){return(L=Object(u.a)(l.a.mark((function t(a){var n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),a.target.reset(),"",n="/api/threads/"+e.board+"?_method=DELETE",t.next=6,fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:e._id,delete_password:c})});case 6:return r=t.sent,t.next=9,r.text();case 9:"success"===t.sent&&e.threadCountAdjust("DELETE");case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function U(){return(U=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"",a="/api/threads/"+e.board+"?_method=PUT",t.next=4,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({thread_id:e._id})});case 4:t.sent,J(!0);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(e){"DELETE"===e&&k(C+1)}return Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"",a="/api/replies/"+e.board+"?thread_id="+e._id,t.next=4,fetch(a);case 4:return n=t.sent,t.next=7,n.json();case 7:r=t.sent,console.log(r),x(r.replies),_(r.replies.length);case 11:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[S,C]),r.a.createElement("div",{className:"thread-container"},r.a.createElement("p",{className:"thread-created-on"},new Date(e.createdOn).toUTCString()),r.a.createElement("p",{className:"thread-bumped-on"},"Last Reply: ",new Date(e.bumpedOn).toUTCString()," "),r.a.createElement("p",{className:"thread-text"},e.text),r.a.createElement("div",{className:"thread-controls"},r.a.createElement("form",{className:"thread-delete-form",onSubmit:function(e){return L.apply(this,arguments)}},r.a.createElement("input",{className:"thread-delete-password",placeholder:"Enter password to delete...",type:"password",onChange:function(e){s(e.target.value)}}),r.a.createElement("button",{className:"thread-delete-button",type:"submit"},"Delete")),r.a.createElement("button",{onClick:function(){return U.apply(this,arguments)},className:"thread-report-button"},"Report"),r.a.createElement("br",null),r.a.createElement("br",null)),A?r.a.createElement("p",null,"Thread has been reported!"):r.a.createElement("div",null),r.a.createElement("form",{className:"thread-create-reply-form",onSubmit:function(e){return P.apply(this,arguments)}},r.a.createElement("textarea",{onChange:function(e){h(e.target.value)},className:"thread-textarea",placeholder:"Reply to thread..."}),r.a.createElement("br",null),r.a.createElement("input",{className:"thread-create-reply-password",type:"password",placeholder:"Enter a password...",onChange:function(e){y(e.target.value)}}),r.a.createElement("button",{className:"thread-create-reply-submit",type:"submit"},"Submit")),r.a.createElement("p",null,"Replies (",S,")"),v.map((function(t){return r.a.createElement(p,{key:t._id,text:t.text,thread_id:e._id,reply_id:t._id,createdOn:t.created_on,replyCountAdjust:B})})))},m=a(8),h=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(0),o=Object(i.a)(s,2),p=o[0],h=o[1],b=Object(n.useState)(!1),f=Object(i.a)(b,2),E=f[0],y=f[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),v=j[0],x=j[1],w=Object(n.useState)(""),g=Object(i.a)(w,2),S=g[0],_=g[1],N=Object(n.useState)(""),T=Object(i.a)(N,2),C=T[0],k=T[1],D=Object(m.g)().board;function R(e){"DELETE"===e&&(h(p-1),y(!0)),"CREATE"===e&&h(p+1)}function A(){return(A=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.target.reset(),"",a="/api/threads/"+D,e.next=6,fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:S,delete_password:C})});case 6:return n=e.sent,e.next=9,n.text();case 9:"success"===e.sent&&(R("CREATE"),x(!0));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"",t="/api/threads/"+D,e.next=4,fetch(t);case 4:return a=e.sent,e.next=7,a.json();case 7:n=e.sent,r=[],n.forEach((function(e){return r.push(e)})),c(r),h(r.length);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,D]),r.a.createElement("div",{className:"board"},r.a.createElement("h1",null,"/"+D),E?r.a.createElement("p",null,"Thread has been deleted."):r.a.createElement("div",null),v?r.a.createElement("p",null,"Thread has been created."):r.a.createElement("div",null),r.a.createElement("form",{onSubmit:function(e){return A.apply(this,arguments)}},r.a.createElement("textarea",{onChange:function(e){_(e.target.value)},className:"board-textarea",placeholder:"Create a thread..."}),r.a.createElement("br",null),r.a.createElement("input",{onChange:function(e){k(e.target.value)},type:"password",placeholder:"Enter a password..."}),r.a.createElement("button",{type:"submit"},"Submit")),a.map((function(e){return r.a.createElement(d,{board:D,text:e.text,_id:e._id,createdOn:e.created_on,bumpedOn:e.bumped_on,key:e._id,threadCountAdjust:R})})))},b=a(11);var f=function(){var e=Object(n.useState)(""),t=Object(i.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)([]),o=Object(i.a)(s,2),p=o[0],d=o[1];return Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/boards",e.next=3,fetch("/api/boards");case 3:return t=e.sent,e.next=6,t.json();case 6:a=e.sent,n=[],a.forEach((function(e){return n.push(e)})),d(n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(b.a,null,r.a.createElement(m.b,{exact:!0,path:"/"},r.a.createElement(m.a,{to:"/main"})),r.a.createElement("div",{class:"App-container"},r.a.createElement("div",{className:"board-list-container"},r.a.createElement("h1",{className:"title"},"Anonymous Message Board"),r.a.createElement("h2",{className:"board-list-title"},"Boards"),r.a.createElement("form",{className:"board-query-form"},r.a.createElement("input",{type:"text",placeholder:"Type board name...",onChange:function(e){c(e.target.value)}}),r.a.createElement(b.b,{to:"/"+a},r.a.createElement("button",{type:"submit"},"Go"))),r.a.createElement("ul",{className:"board-list"},p.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("span",null,r.a.createElement(b.b,{to:"/"+e},e)))}))),r.a.createElement("div",{className:"copyright"},"Copyright 2020 Sovanarung Seng. All Right Reserved.")),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/:board",children:r.a.createElement(h,null)}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.b5bd0801.chunk.js.map